{"ast":null,"code":"import _objectSpread from \"E:\\\\fork\\\\frontend-111406\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport _slicedToArray from \"E:\\\\fork\\\\frontend-111406\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"E:\\\\fork\\\\frontend-111406\\\\src\\\\new\\\\page\\\\searchpage\\\\index.js\";\n\nimport React, { Component, useState } from \"react\";\nimport { Div0, SearchDiv, ContentDiv, SearchTitle, DivLog, InPutL, DivLogin } from './sty';\nimport { Token } from \"../../common/token\";\nimport Header from '../../common/header/index';\nimport qs from 'qs';\nimport { useLocation, useNavigate } from \"react-router-dom\"; // const [loading, setLoading] = React.useState(false);\n// const [username, setUsername] = useState(\"\");\n// const [errorMessage, setErrorMessage] = useState(\"\");\n\nvar allUser = [];\nfetch('https://backend-111406.onrender.com/api/user', {\n  method: \"GET\",\n  headers: new Headers({\n    'Content-Type': 'application/json',\n    'token': Token\n    /* 把token放在這 */\n\n  })\n}).then(function (response) {\n  return response.json();\n}).then(function (myJson) {\n  return myJson.data;\n}).then(function (user) {\n  for (var i = 0; i < user.length; i++) {\n    allUser.push(user[i].user_id);\n  } // console.log(allUser);\n\n});\n\nvar SearchPage = function SearchPage() {\n  var location = useLocation();\n  var history = useNavigate();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      searchName = _useState2[0],\n      setSearchName = _useState2[1];\n\n  var value = parseObjectValues(qs.parse(location.search, {\n    ignoreQueryPrefix: true\n  }) || {});\n\n  var tryParseInt = function tryParseInt(value) {\n    var result = parse(value);\n    return isNaN(result) ? value : result;\n  };\n\n  var parseObjectValues = function parseObjectValues() {\n    var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    Object.keys(obj).forEach(function (k) {\n      obj[k] = tryParseInt(obj[k]);\n    });\n    return obj;\n  };\n\n  var handleSearchName = function handleSearchName(e) {\n    setSearchName(e.target.value);\n  };\n\n  var handleSearch = function handleSearch(e) {\n    for (var i = 0; i < allUser.length; i++) {\n      if (allUser[i] == searchName) {\n        // console.log(searchName);\n        // navigate('/personal',{'searchName':searchName});\n        history.push({\n          pathname: location.pathname,\n          search: qs.stringify(_objectSpread({}, value, parseObjectValues(params)))\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(Div0, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(ContentDiv, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(SearchDiv, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SearchTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 29\n    }\n  }, \"\\u8ACB\\u8F38\\u5165\\u6B32\\u641C\\u5C0B\\u4F7F\\u7528\\u8005\\uFF1A\"), /*#__PURE__*/React.createElement(DivLog, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(InPutL, {\n    id: \"email\",\n    type: \"text\",\n    placeholder: \"USERNAME\",\n    size: \"30\",\n    value: searchName,\n    onChange: handleSearchName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 29\n    }\n  })), /*#__PURE__*/React.createElement(DivLogin, {\n    type: \"button\",\n    className: \"btn btn-primary\",\n    value: '搜尋',\n    onClick: handleSearch,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 29\n    }\n  }))));\n};\n\nexport default SearchPage;","map":{"version":3,"names":["React","Component","useState","Div0","SearchDiv","ContentDiv","SearchTitle","DivLog","InPutL","DivLogin","Token","Header","qs","useLocation","useNavigate","allUser","fetch","method","headers","Headers","then","response","json","myJson","data","user","i","length","push","user_id","SearchPage","location","history","searchName","setSearchName","value","parseObjectValues","parse","search","ignoreQueryPrefix","tryParseInt","result","isNaN","obj","Object","keys","forEach","k","handleSearchName","e","target","handleSearch","pathname","stringify","params"],"sources":["E:/fork/frontend-111406/src/new/page/searchpage/index.js"],"sourcesContent":["import React,{Component,useState} from \"react\";\r\nimport {Div0,SearchDiv,ContentDiv,SearchTitle,DivLog,InPutL,DivLogin} from'./sty';\r\nimport { Token } from \"../../common/token\";\r\nimport Header from '../../common/header/index';\r\nimport qs from 'qs';\r\nimport { useLocation, useNavigate  } from \"react-router-dom\";\r\n// const [loading, setLoading] = React.useState(false);\r\n// const [username, setUsername] = useState(\"\");\r\n// const [errorMessage, setErrorMessage] = useState(\"\");\r\nconst allUser=[];\r\n\r\nfetch('https://backend-111406.onrender.com/api/user', {\r\n                method: \"GET\",\r\n                headers: new Headers({\r\n                    'Content-Type': 'application/json',\r\n                    'token': Token, /* 把token放在這 */\r\n                })\r\n}\r\n    )\r\n    .then(function(response) {\r\n        return response.json();\r\n      })\r\n      .then(function(myJson) {\r\n        return myJson.data;\r\n      })\r\n      .then(function(user) {\r\n        for (var i = 0; i < user.length; i++) {\r\n            allUser.push(user[i].user_id);\r\n          }\r\n        // console.log(allUser);\r\n      })\r\n\r\nconst SearchPage = () => {\r\n    const location = useLocation()\r\n    const history = useNavigate()\r\n        const [searchName, setSearchName] = useState(\"\");\r\n        const value = parseObjectValues(\r\n          qs.parse(location.search, { ignoreQueryPrefix: true }) || {}\r\n        )\r\n        const tryParseInt = value => {\r\n          const result = parse(value)\r\n          return isNaN(result) ? value : result\r\n        }\r\n        \r\n        const parseObjectValues = (obj = {}) => {\r\n          Object.keys(obj).forEach(k => {\r\n            obj[k] = tryParseInt(obj[k])\r\n          })\r\n        \r\n          return obj\r\n        }\r\n        const handleSearchName = (e) => {\r\n            setSearchName(e.target.value);\r\n          };\r\n        const handleSearch = (e) => {\r\n            for (var i = 0; i < allUser.length; i++) {\r\n                if(allUser[i]==searchName){\r\n                    // console.log(searchName);\r\n                    // navigate('/personal',{'searchName':searchName});\r\n                    history.push({\r\n                      pathname: location.pathname,\r\n                      search: qs.stringify({ ...value, ...parseObjectValues(params) })\r\n                    })\r\n                }\r\n              }\r\n          };\r\n        return (\r\n                <Div0>\r\n                    <Header></Header>\r\n                    <ContentDiv>\r\n                        <SearchDiv>\r\n                            <SearchTitle>請輸入欲搜尋使用者：</SearchTitle>\r\n                            <DivLog>\r\n                            <InPutL id=\"email\" type=\"text\" placeholder=\"USERNAME\" size=\"30\" value={searchName} onChange={handleSearchName} ></InPutL>\r\n                            </DivLog>\r\n                            <DivLogin type=\"button\" className=\"btn btn-primary\" value={'搜尋'} onClick={handleSearch}>\r\n                            </DivLogin>\r\n                        </SearchDiv>\r\n                    </ContentDiv>\r\n                </Div0>\r\n        );}\r\n\r\nexport default SearchPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}